<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>decription about details</title>
	<link rel="stylesheet" href="css/common.css" type="text/css"/>
	<link rel="stylesheet" href="css/channeldetail.css" type="text/css"/>
	<style>
		
	</style>
	<script>/*从地址栏获取产品的详细信息，并且切割成数组*/
		function getCookie(){
			var _url=window.location.search.replace("?","");
			var _arr=_url.split("&");
			getMessage(_arr);
			return _arr;	
		}/*将获取的信息写入对应的产品之中*/
		function getMessage(_arr){
			var _img1=document.getElementsByTagName("img")[0];
			_img1.src="images/"+_arr[0].split("=")[1]+".jpg";
			var _img2=document.getElementsByTagName("img")[1];
			_img2.src="images/"+_arr[0].split("=")[1]+".jpg";
			var _strong=document.getElementsByTagName("strong")[0];
			_strong.innerHTML="¥"+_arr[1].split("=")[1];
			var _class=document.getElementsByClassName("branddetail")[0].children[1].children[0];
			_class.innerHTML=_arr[2].split("=")[1];
			var _where=document.getElementsByClassName("branddetail")[0].children[2].children[0];
			_where.innerHTML=_arr[3].split("=")[1];
			var _b=document.getElementById("count").getElementsByTagName("b")[0];
			//_b.style.color="red";
			_b.innerHTML=parseInt(_arr[4].split("=")[1])-1;
			
			
		}/*进行单件产品购买数量的计算，并且将购买的情况上传到购物车*/
		function addCount(EventUtil){
			var _span=document.getElementById("count").children[0];
			var _b=document.getElementById("count").children[1];
			var _cart=document.getElementById("cart");
			var _reminde=document.getElementById("reminde");
			var _shadow=document.getElementById("shadow");
			EventUtil.addEvent(_span.children[0],"click",function(e){
				e=e||window.event;
				
				if(parseInt(_span.children[1].innerHTML)==0){
					_span.children[1].innerHTML=0;
				}else{
					_span.children[1].innerHTML=parseInt(_span.children[1].innerHTML)-1;
					_b.innerHTML=parseInt(_b.innerHTML)+1;
				}
			});
			EventUtil.addEvent(_span.children[2],"click",function(e){
				e=e||window.event;
				if(parseInt(_b.innerHTML)==0){
					_span.children[1].innerHTML=_span.children[1].innerHTML;
				}else{
					_span.children[1].innerHTML=parseInt(_span.children[1].innerHTML)+1;
					_b.innerHTML=parseInt(_b.innerHTML)-1;
				}
				
				
			});
			EventUtil.addEvent(_cart.children[1],"click",function(e){
				_reminde.style.display="block";
				_reminde.style.zIndex=99;
				_shadow.style.display="block";
			});
			EventUtil.addEvent(_cart.children[0],"click",function(e){
				e=e||window.event;
				if(parseInt(_span.children[1].innerHTML)>0){
					var _category=document.getElementsByTagName("h2")[0].innerHTML;/*获取产品的名称*/
					var _count=parseInt(_span.children[1].innerHTML);/*获取该产品的购买数量*/
					window.location.href="cart.html?name="+_category+"&count="+_count;/*跳转的购物车*/
				}else{
					alert("您还没有选择商品");
				}
			});
			EventUtil.addEvent(_reminde.children[2].children[0],"click",function(e){
				e=e||window.event;
				if(parseInt(_span.children[1].innerHTML)>0){
					var _category=document.getElementsByTagName("h2")[0].innerHTML;/*获取产品的名称*/
					var _count=parseInt(_span.children[1].innerHTML);/*获取该产品的购买数量*/
					window.location.href="cart.html?name="+_category+"&count="+_count;/*跳转的购物车*/
				}else{
					alert("您还没有选择商品");
				}
				
			});
			EventUtil.addEvent(_reminde.children[2].children[1],"click",function(e){
				_reminde.style.display="none";
				_shadow.style.display="none";
				
			});
			EventUtil.addEvent(_reminde.children[0].children[0],"click",function(e){
				_reminde.style.display="none";
				_shadow.style.display="none";
			});
			EventUtil.addEvent(_shadow,"click",function(e){
				this.style.display="none";
				_reminde.style.display="none";
			})
		}
		window.onload=function(){
			/*设置cookie*/
			var cookieUtil={
				get:function(name){
					var cookieName=encodeURIComponent(name)+"=";
					var cookieStart=document.cookie.indexOf(cookieName);
					var cookieValue=null;
					if(cookieStart>-1){
						var cookieEnd=document.cookie.indexOf(";",cookieStart);
						if(cookieEnd==-1){
							cookieEnd=document.cookie.length;
						}
						cookieValue=decodeURIComponent(document.cookie.substring(cookieStart+cookieName.length,cookieEnd));
						
					}
					return cookieValue;
				},
				set:function(name,value,expires,path,domain,secure){
					var cookieText=encodeURIComponent(name)+"="+encodeURIComponent(value);
					//console.log(cookieText)
					//var cookieText=name +"=" +value;
					if(expires instanceof Date){
						cookieText+=";expires="+expires.toGMTString();
					}
					if(path){
						cookieText+=";path="+path;
					}if(domain){
						cookieText+=";domain="+domain;
					}if(secure){
						cookieText+=";secure";
					}
					document.cookie=cookieText;
					//console.log(document.cookie);
				},
				unset:function(name,path,domain,secure){
					this.set(name,"",new Date(0),path,domain,secure);
				}
			};/*为元素添加事件*/
			var EventUtil={
			addEvent:function(element,type,hander){
				if(element.addEventListener){
					element.addEventListener(type,hander,false)
				}else if(element.attachEvent){
					element.attachEvent("on"+type,hander);
				}else{
					element["on"+type]=hander;
				}
			},
			removeEvent:function(element,type,hander){
				if(element.removeEventListener){
					element.removeEventListener(type,hander,false);
				}else if(element.detachEvent){
					element.detachEvent("on"+type,hander);
				}else{
					element["on"+type]=null;

				}
			}
		};
			var _arr=getCookie();
			for(var i=0;i<_arr.length;i++){
				cookieUtil.set(_arr[i].split("=")[0],_arr[i].split("=")[1]);/*添加cookie*/
				
			}
			addCount(EventUtil);	
			
		}/*组织鼠标拖拽的蓝色选框*/
		document.onselectstart=function(e){
			e=e||window.event;
			e.stopProgation?e.stopProgation():e.cancelBubble=true;
			e.preventDefault?e.preventDefault():e.returnValue=false;
		}
	</script>
</head>
<body>
	<div class="container">
		<div class="left">
			<img alt="" src=""/>
	
		</div>
		<div class="right">
			<div class="brandname">
				<h2>CHANEL(香奈儿)银色镶钻小双C耳饰</h2>
			</div>
			<div class="branddetail">
				<p>寺库价<strong></strong></p>
				<p>商品级别<span></span></p>
				<p class="born">发货地<span></span>&nbsp;有货<span>&nbsp;17点钟前完成下单,预计72小时送达</span></p>
				<p>温馨提示<span>到店自提有精美礼品</span></p>
			</div>
			<div class="brandlist">
				<p class="count" id="count">购买数量<span class="count"><span>-</span><span>1</span><span>+</span></span>仅剩<b></b>件,抓紧时间购买哦!</p>
				<p id="cart"><span>立即抢购</span><span>加入购物车</span></p>
				
			</div>
			<div class="wish"></div>
		</div>
		<div class="outpicture">
			<div>
				<img alt="" src=""/>
			</div>
			
		</div>
	
	</div>
	<div id="reminde">
		<div>&nbsp;&nbsp;加入购物车成功<span>X</span></div>
		<div>添加成功</div>
		<div>
			<span>去购物车结算</span>
			<span>继续购物</span>
		</div>
	
	</div>
	<div id="shadow"></div>
	

</body>
</html>